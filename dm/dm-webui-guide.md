---
title: Use WebUI to Manage DM migration tasks
summary: Learn how to use WebUI to manage DM migration tasks.
---

# WebUIを使用してDM移行タスクを管理する {#use-webui-to-manage-dm-migration-tasks}

DM WebUIは、TiDBデータ移行（DM）タスクを管理するためのWebベースのGUIプラットフォームです。このプラットフォームは、多数の移行タスクを管理するためのシンプルで直感的な方法を提供します。これにより、dmctlコマンドラインツールを使用する必要がなくなります。

このドキュメントでは、DM WebUIにアクセスする方法、前提条件、インターフェイス上の各ページの使用例、および注意点を紹介します。

> <strong>警告：</strong>
>
> -   DM WebUIは現在、実験的な機能です。実稼働環境での使用はお勧めしません。
> -   DM WebUIの`task`のライフサイクルが変更されたため、DMWebUIとdmctlを同時に使用することはお勧めしません。

DMWebUIには次のページがあります。

-   <strong>ダッシュボード</strong>：DMの移行タスクの主な監視情報とステータス情報を表示して、移行タスクの全体的な実行ステータスと、待機時間とパフォーマンスに関する主要なメトリックをすばやく学習できるようにします。
-   <strong>移行</strong>
    -   <strong>タスク</strong>：タスク作成のエントリを提供し、各移行タスクの詳細情報を表示します。このページは、移行タスクの監視、作成、削除、および構成に役立ちます。
    -   <strong>ソース</strong>：移行タスクのアップストリームデータソースの情報を構成します。このページでは、アップストリーム構成の作成と削除、アップストリーム構成に対応するタスクステータスの監視、アップストリーム構成の変更など、データ移行環境でのアップストリーム構成を管理できます。
    -   <strong>レプリケーションの詳細</strong>：移行タスクの詳細なステータス情報を表示します。このページでは、アップストリームとダウンストリームの構成情報とデータベース名、ソーステーブルとターゲットテーブルの関係など、指定されたフィルターに基づく詳細な構成とステータス情報を表示できます。
-   <strong>集まる</strong>
    -   <strong>メンバー</strong>：DMクラスター内のすべてのマスターノードとワーカーノードのリスト、およびワーカーノードとソース間のバインディング関係を表示します。このページでは、現在のDMクラスターの構成情報と各ワーカーのステータス情報を表示できます。また、このページでは基本的な管理も行っています。

インターフェイスは次のとおりです。

![webui](/media/dm/dm-webui-preview-en.png)

## アクセス方法 {#access-method}

DMクラスターの任意のマスターノードからDMWebUIにアクセスできます。アクセスポートはデフォルトで`8261`であり、DMOpenAPIのアクセスポートと同じです。アクセスアドレスの例を次に示します： `http://{master_ip}:{master_port}/dashboard/` 。

## 前提条件 {#prerequisites}

DM WebUIが情報を正しく表示できるようにするには、DM WebUIを使用する前に、次の操作または構成が完了していることを確認してください。

-   DMOpenAPI構成を有効にします。

    -   DMクラスターがバイナリを使用してデプロイされている場合は、マスターノードの構成で`openapi`の構成項目を有効にします。

        ```
        openapi = true
        ```

    -   DMクラスターがTiUPを使用してデプロイされている場合は、トポロジーファイルに次の構成を追加します。

        ```yaml
        server_configs:
          master:
            openapi: true
        ```

-   Grafanaを初めてデプロイするときは、 `monitoring_servers`と`grafana_servers`のコンポーネントが正しくインストールされていることを確認してください。次のように`grafana_servers`を構成することが期待できます。

    ```
    grafana_servers:
      - host: 10.0.1.14
        # port: 3000
        # deploy_dir: /tidb-deploy/grafana-3000
        config:       # Make sure that the TiUP version for tiup dm -v is later than v1.9.0.
          auth.anonymous.enabled: true
          security.allow_embedding: true
    ```

    `grafana_servers`のIPとポートがデフォルトのものでない場合は、<strong>ダッシュボード</strong>ページで正しいIPとポートを入力する必要があります。

-   DMクラスターが以前のバージョンからアップグレードされている場合は、Grafana構成を手動で変更する必要があります。

    1.  `/{deploy-dir}/grafana-{port}/conf/grafana.ini`のファイルを次のように編集して、2つの構成アイテムを変更します。

        ```ini
        [auth.anonymous]
        enabled = true

        [security]
        allow_embedding = true
        ```

    2.  `tiup dm reload`を実行して、新しい構成を有効にします。

## ダッシュボード {#dashboard}

移行タスクの監視を確認するには、<strong>ダッシュボード</strong>ページにアクセスしてください。<strong>ダッシュボード</strong>は、 `Standard`および`Professional`のビューを含む組み込みのGrafanaダッシュボードであり、各ビューには、標準的な観点または比較的専門的な観点からの監視情報が表示されます。

## 移行 {#migration}

<strong>移行</strong>には、<strong>ソース</strong>、<strong>タスク</strong>、および<strong>レプリケーションの詳細</strong>ページが含まれます。

## ソース {#source}

移行タスクを作成する前に、レプリケーションタスクのアップストリームのデータソース情報を作成する必要があります。<strong>ソース</strong>ページでアップストリーム構成を作成できます。ソースを作成するときは、次の項目に注意してください。

-   プライマリインスタンスとセカンダリインスタンスの間に自動フェイルオーバーがある場合は、アップストリームMySQLでGTIDを有効にし、アップストリーム構成を作成するときにGTIDを`True`に設定します。そうしないと、フェイルオーバー中に移行タスクが中断されます（AWS Auroraを除く）。
-   MySQLインスタンスを一時的にオフラインにする必要がある場合は、インスタンスを無効にすることができます。ただし、MySQLインスタンスが無効になっている場合、移行タスクを実行している他のMySQLインスタンスはDDL操作を実行しないでください。そうしないと、無効にされたインスタンスは、有効にされた後にデータを適切に移行できません。
-   複数の移行タスクが同じアップストリームを使用する場合、追加のストレスが発生する可能性があります。リレーログを有効にすると、アップストリームへの影響を減らすことができるため、リレーログを有効にすることをお勧めします。

### 仕事 {#task}

<strong>[タスク]</strong>ページで移行タスクの詳細を表示し、移行タスクを作成できます。

#### 移行タスクの詳細を表示する {#view-migration-task-details}

タスクリストで、タスク名をクリックして、右から[詳細]ページを表示します。 [詳細]ページには、より詳細なタスクステータス情報が表示されます。このページでは、各サブタスクのステータスと移行タスクの現在の構成情報を表示できます。

DMでは、移行タスクの各サブタスクは異なる段階にある可能性があります。つまり、フルダンプ-&gt;フルインポート（ロード）-&gt;インクリメンタルレプリケーション（同期）です。したがって、タスクの現在のステージは、サブタスクステータスの統計とともに表示されます。これは、タスクの実行ステータスをよりよく理解するのに役立ちます。

#### 移行タスクを作成する {#create-migration-tasks}

このページで移行タスクを作成するには、右上隅にある[<strong>追加</strong>]ボタンをクリックします。次のいずれかの方法を使用して、移行タスクを作成できます。

-   WebUIの指示に従う。 WebUIに必要な情報を段階的に入力します。この方法は、初心者や日常の使用に適しています。
-   構成ファイルを使用する。 JSON形式の構成ファイルを貼り付けるか書き込んで、移行タスクを作成します。この方法は、より多くのパラメーターの調整をサポートし、上級ユーザーに適しています。

## レプリケーションの詳細 {#replication-detail}

移行タスク用に構成された移行ルールのステータスは、[<strong>レプリケーションの詳細]</strong>ページで確認できます。このページは、タスク、ソース、およびデータベース名によるクエリをサポートしています。

クエリ結果には、アップストリームテーブルとダウンストリームテーブルの対応する情報が含まれているため、クエリ結果が多すぎるとページの応答が遅くなる場合に備えて、 `.*`を使用するように注意してください。

## 集まる {#cluster}

### メンバー {#members}

[<strong>メンバー]</strong>ページには、DMクラスター内のすべてのマスターノードとワーカーノード、およびワーカーノードとソース間のバインディング関係が表示されます。
